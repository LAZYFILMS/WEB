<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAZY FILM STORE</title>

    <!-- Fonts -->
    <link href="https://use.typekit.net/[your-kit-code].css" rel="stylesheet">
    <style>
        body {
            font-family: "stratos", monospace;
            margin: 0;
            padding: 0;
            background: #fff;
            position: relative;
            min-height: 100vh;
        }

        .container {
            width: 600px;
            padding: 30px;
            border: 2px solid #000;
            border-radius: 8px;
            background-color: #fff;
            margin: 20px auto;
            position: relative;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .title {
            font-family: "stratos-black", sans-serif;
            font-size: 24px;
            margin: 0;
            text-transform: uppercase;
            font-weight: bold;
        }

        .develop-link {
            font-family: "stratos-black", sans-serif;
            text-decoration: none;
            color: #000;
            font-size: 24px;
            text-transform: uppercase;
            font-weight: bold;
            text-decoration: underline;
            cursor: pointer;
        }

        .product-header {
            margin-bottom: 20px;
        }

        .product-header img {
            width: 100%;
            height: auto;
            border: 1px solid #000;
            margin-bottom: 15px;
        }

        .product-details {
            margin-top: 10px;
            display: flex;
            gap: 25px;
            margin-bottom: 20px;
            align-items: flex-start;
            flex-wrap: wrap;
            padding-top: 10px;
            width: 100%;
            padding: 0 15px;
            box-sizing: border-box;
            margin: 0;
        }

        .product-thumbnail {
            width: 112px;
            height: auto;
            margin-right: 5px;
        }

        .product-info {
            flex: 1;
            min-width: 300px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            padding-right: 8px;
            margin: 0;
        }

        .product-header-group {
            flex: 1;
            margin-bottom: 5px;
        }

        .product-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .quantity-input {
            width: 60px;
            height: 35px;
            border: 1px solid #000;
            border-radius: 4px;
            text-align: center;
            font-family: "stratos", monospace;
            font-size: 14px;
        }

        /* Hide native number spinners */
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .quantity-input { -moz-appearance: textfield; }

        /* Quantity control with +/- buttons inside the input (keeps same size) */
        .quantity-control { position: relative; display: inline-block; }
        .quantity-control .quantity-input {
            width: 72px;
            height: 35px;
            border: 1px solid #000;
            border-radius: 4px;
            padding: 0 24px; /* room for +/- */
            box-sizing: border-box;
        }
        .qty-btn {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 24px;
            background: transparent;
            border: none;
            font-size: 16px;
            line-height: 1;
            cursor: pointer;
            user-select: none;
        }
        .qty-btn.decrement { left: 0; }
        .qty-btn.increment { right: 0; }

        /* Out of stock styling */
        .out-of-stock {
            opacity: 0.6;
            pointer-events: none;
        }
        .out-of-stock .quantity-control,
        .out-of-stock .add-to-cart {
            opacity: 0.5;
            pointer-events: none;
        }
        .stock-status {
            color: #ff0000;
            font-size: 12px;
            font-weight: bold;
            margin-top: 5px;
            text-align: center;
            width: 100%;
        }

        .product-title {
            display: block;
            font-family: "stratos-black", sans-serif;
            font-size: 20px;
            margin: 0;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .product-price {
            display: block;
            font-family: "stratos-black", sans-serif;
            font-size: 16px;
            margin: 0 0 15px 0;
            font-weight: 500;
        }

        .product-description {
            font-size: 14px;
            line-height: 1.4;
            margin: 25px 0 15px 0;
            width: 100%;
            flex-basis: 100%;
            order: 3;
        }

        .description-preview {
            display: block;
        }

        .description-full {
            display: none;
        }

        .description-full.show {
            display: inline;
        }

        .see-more-desc {
            background: none;
            border: none;
            color: #0000EE;
            text-decoration: underline;
            cursor: pointer;
            font-size: 12px;
            padding: 0;
            margin-top: 5px;
        }

        .see-samples {
            color: #0000EE;
            text-decoration: underline;
            cursor: pointer;
            font-size: 12px;
            display: block;
            margin-top: 15px;
        }

        .add-to-cart {
            background: #000;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: "stratos-black", sans-serif;
            font-size: 16px;
            white-space: nowrap;
            font-weight: bold;
        }

        .add-to-cart.loading {
            opacity: 0.7;
            cursor: wait;
            position: relative;
        }

        .add-to-cart.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            right: 10px;
            transform: translateY(-50%);
            border: 2px solid #fff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: translateY(-50%) rotate(360deg); }
        }

        .cart-count {
            background: #000;
            color: #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-left: 5px;
        }

        .error-message {
            color: red;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .cart-summary {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #000;
            border-radius: 4px;
            font-size: 16px;
        }

        .cart-summary h3 {
            font-family: "stratos-black", sans-serif;
            font-size: 18px;
            font-weight: bold;
            margin: 0 0 15px 0;
        }

        .place-order {
            width: 100%;
            background: #000;
            color: #fff;
            border: none;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: "stratos-black", sans-serif;
            font-size: 18px;
            text-transform: uppercase;
            font-weight: bold;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            font-size: 14px;
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        footer a {
            font-family: "stratos", sans-serif;
            font-size: 12px;
            color: #000;
            text-decoration: none;
            text-transform: uppercase;
        }

        /* Base gallery styles */
        .sample-photos {
            position: absolute;  /* Keep absolute positioning */
            left: 50%;
            transform: translateX(-50%);
            width: 800px;
            margin-top: 40px;
            padding-bottom: 40px;
        }

        .gallery-title {
            font-family: "stratos-black", sans-serif;
            font-size: 18px;
            text-transform: uppercase;
            text-align: center;
            margin-bottom: 20px;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            align-items: start;
        }

        .gallery-image {
            width: 100%;
            height: 220px;
            object-fit: cover;
            transition: transform 0.2s ease;
        }

        .gallery-image:hover {
            transform: scale(1.02);
            z-index: 1;
        }

        /* Adjust heights and crop positions for all images */
        .gallery-image:nth-child(1) {
            height: 220px;
            object-position: center 20%;
        }

        .gallery-image:nth-child(2) {
            height: 220px;
            object-position: center 60%;
        }

        .gallery-image:nth-child(3) {
            height: 220px;
            object-position: center 25%;
        }

        .gallery-image:nth-child(4) {
            height: 220px;
            object-position: center top;
        }

        .gallery-image:nth-child(5) {
            height: 220px;
            object-position: center 45%;
        }

        .gallery-image:nth-child(6) {
            height: 220px;
            object-position: center 35%;
        }

        /* Adjust last three images */
        .gallery-image:nth-child(7) {
            height: 220px;
            object-position: center 55%;
        }

        .gallery-image:nth-child(8) {
            height: 220px;
            object-position: center 40%;
        }

        .gallery-image:nth-child(9) {
            height: 220px;
            object-position: center 50%;
        }

        /* Modal styles for full-size images */
        .image-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            cursor: pointer;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            max-width: 90%;
            max-height: 90vh;
            object-fit: contain;
            border: none;
            box-shadow: none;
        }

        .image-modal.active {
            display: flex;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .gallery-image {
            cursor: pointer;
        }

        /* Universal Cart Styles */
        .universal-cart-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #000;
            color: #fff;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            transition: transform 0.2s;
        }

        .universal-cart-button:hover {
            transform: scale(1.05);
        }

        .cart-count-bubble {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff0000;
            color: #fff;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* Cart Drawer Styles */
        .cart-drawer {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: #fff;
            box-shadow: -4px 0 12px rgba(0,0,0,0.1);
            z-index: 1001;
            transition: right 0.3s;
            padding: 20px;
            box-sizing: border-box;
        }

        .cart-drawer.active {
            right: 0;
        }

        .cart-drawer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .cart-items-container {
            max-height: calc(100vh - 200px);
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid #eee;
            justify-content: space-between;
            align-items: center;
        }

        .cart-item-details {
            flex: 1;
            margin-right: 15px;
        }

        .cart-item-details h4 {
            font-family: "stratos-black", sans-serif;
            font-size: 16px;
            margin: 0 0 5px 0;
        }

        .cart-item-details p {
            font-size: 14px;
            margin: 0;
            color: #666;
        }

        .cart-item button {
            background: #fff;
            color: #ff0000;
            border: 1px solid #ff0000;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .cart-item button:hover {
            background: #ff0000;
            color: #fff;
        }

        .cart-drawer-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: #fff;
            border-top: 1px solid #eee;
        }

        .cart-total {
            font-family: "stratos-black", sans-serif;
            font-size: 18px;
            margin-bottom: 15px;
        }

        .checkout-button {
            width: 100%;
            background: #000;
            color: #fff;
            border: none;
            padding: 12px;
            border-radius: 4px;
            font-family: "stratos-black", sans-serif;
            font-size: 16px;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .checkout-button:hover {
            opacity: 0.9;
        }

        /* Add mobile responsive styles */
        @media (max-width: 768px) {
            .container {
                width: 90%;
                margin: 10px auto;
                padding: 15px;
                border-width: 1px;
            }

            /* Carousel styles */
            .carousel {
                position: relative;
                width: 100%;
                height: 250px;
                overflow: hidden;
                margin-bottom: 0px;  /* Negative margin to remove gap */
            }

            /* Product details container */
            .product-details {
                margin-top: -100px;  /* Keep the negative margin for first product */
                padding: 0;
                gap: 10px;
                display: flex;
                align-items: flex-start;
                flex-wrap: wrap;
            }

            /* Spacing for second product only */
            .product-details + .product-details {
                margin-top: 50px;  /* Increased spacing to prevent overlap */
                padding-top: 30px;
                border-top: 1px solid #eee;
                position: relative;  /* Ensure proper stacking */
                z-index: 1;  /* Ensure it stays above first product */
            }

            /* Product thumbnail */
            .product-thumbnail {
                width: 130px;
                height: auto;
                margin-right: 5px;
                margin-top: 0;
                display: block;
            }

            /* Remove any extra spacing */
            .product-header {
                margin: 0;
                padding: 0;
                font-size: 0;  /* Remove any font spacing */
                line-height: 0;  /* Remove line height spacing */
            }

            /* Header adjustments */
            header {
                margin-bottom: 15px;
                padding: 5px 0;
            }

            .title {
                font-size: 20px;
            }

            /* Develop film link adjustment */
            .develop-link {
                font-size: 19px;
                text-decoration: underline;
            }

            /* Product header adjustments */
            .product-header {
                margin: 0;
            }

            /* Product header image */
            .product-header img {
                width: 100%;
                height: auto;
                margin-bottom: 15px;
            }

            /* Product info adjustments */
            .product-info {
                min-width: unset;
                margin: 0;
                display: flex;
                flex-direction: column;
                gap: 10px;
                align-items: flex-end;
                padding-right: 8px;
            }

            /* Product header-group adjustments */
            .product-header-group {
                margin-bottom: 5px;
                text-align: right;
                margin-right: 2px;  /* Slight adjustment for text alignment */
            }

            .product-title {
                font-size: 20px;
                font-weight: 600;
                margin: 0 0 4px 0;
            }

            .product-price {
                font-size: 18px;
                margin: 0;
                font-weight: bold;
            }

            .product-actions {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 10px;
                justify-content: flex-end;
                margin-right: 2px;  /* Align with text above */
                width: 100%;  /* Ensure full width for better touch targets */
            }

            .quantity-input {
                width: 60px;
                height: 36px;
                -webkit-appearance: none;  /* Fix for iOS */
                appearance: none;
                margin: 0;
                padding: 0 5px;
                text-align: center;
                pointer-events: auto !important;  /* Force enable interaction */
                z-index: 2;  /* Ensure it's above other elements */
            }

            .add-to-cart {
                padding: 8px 15px;
                font-size: 14px;
                pointer-events: auto !important;  /* Force enable interaction */
                z-index: 2;  /* Ensure it's above other elements */
                position: relative;  /* Ensure proper stacking */
            }

            /* Fix stacking context */
            .product-info {
                position: relative;
                z-index: 1;
            }

            /* Description text */
            .product-description {
                margin: 10px 0;
                font-size: 14px;
                line-height: 1.4;
            }

            /* Cart summary adjustments */
            .cart-summary {
                width: 100%;
                margin: 15px auto;
                padding: 15px;
                box-sizing: border-box;
            }

            /* Sample photos grid */
            .sample-photos {
                position: relative !important;  /* Override absolute positioning */
                left: 0 !important;  /* Reset left position */
                transform: none !important;  /* Remove transform */
                width: 90% !important;  /* Set width relative to viewport */
                margin: 20px auto !important;  /* Center align with consistent spacing */
            }

            .gallery-grid {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }

            .gallery-image {
                height: 160px;
            }

            .gallery-title {
                font-size: 18px;
            }

            /* Reset the second gallery spacing for mobile */
            #sample-gallery-250 {
                position: relative !important;
                margin-top: 60px !important;  /* Consistent spacing between galleries */
            }

            .carousel {
                height: 250px;
                margin: 0;
                padding: 0;
            }
        }

        .carousel {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
        }

        .carousel-image {
            position: absolute;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        .carousel-image.active {
            opacity: 1;
        }

        .see-more-btn {
            background: none;
            border: none;
            color: #0000EE;
            text-decoration: underline;
            cursor: pointer;
            font-size: 12px;
            padding: 0;
            margin-right: 15px;
        }

        /* Separator between galleries */
        .sample-photos + .sample-photos {
            margin-top: 80px;
            border-top: 1px solid #eee;
            padding-top: 40px;
        }

        /* Spacing for second gallery */
        #sample-gallery-250 {
            margin-top: 900px;  /* Original spacing */
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <span class="title">LAZY FILM STORE</span>
            <a href="https://lazyfilms.in/labs" class="develop-link">DEVELOP FILM</a>
        </header>

        <div class="product-header">
            <div class="carousel">
                <img src="images/lazy500.jpg" alt="Lazy 500 Film" class="carousel-image active">
                <img src="images/lazy250.jpg" alt="Lazy 250 Film" class="carousel-image">
            </div>
        </div>

        <div class="product-details">
            <img src="images/lazy500-thumb.jpg" alt="Lazy 500" class="product-thumbnail">
            <div class="product-info">
                <div class="product-header-group">
                    <h2 class="product-title">LAZY 500</h2>
                    <p class="product-price">â‚¹750</p>
                </div>
                <div class="product-actions">
                    <div class="quantity-control">
                        <button type="button" class="qty-btn decrement" data-product="lazy500">âˆ’</button>
                        <input type="number" class="quantity-input" value="1" min="1" data-product="lazy500">
                        <button type="button" class="qty-btn increment" data-product="lazy500">+</button>
                    </div>
                    <button class="add-to-cart" data-product="lazy500" data-variant="43200428507235">Add to Cart</button>
                </div>
                <div class="stock-status" id="stock-status-lazy500" style="display: none;">Out of Stock</div>
            </div>
            <p class="product-description">
                <span class="description-preview">Lazy500 is a versatile 500 ASA tungsten-balanced film stock, perfect for capturing stunning skin tones and cool, cinematic hues.</span>
                <span class="description-full">Ideally processed in ECN-2, it delivers exceptional results across a wide range of scenarios, making it the go-to choice for just about anything you want to shoot.</span>
                <button class="see-more-desc" data-product="lazy500">See more</button>
                <a href="#sample-gallery" class="see-samples">See Sample photos</a>
            </p>
        </div>

        <div class="product-details">
            <img src="images/lazy250-thumb.jpg" alt="Lazy 250" class="product-thumbnail">
            <div class="product-info">
                <div class="product-header-group">
                    <h2 class="product-title">LAZY 250</h2>
                    <p class="product-price">â‚¹750</p>
                </div>
                <div class="product-actions">
                    <div class="quantity-control">
                        <button type="button" class="qty-btn decrement" data-product="lazy250">âˆ’</button>
                        <input type="number" class="quantity-input" value="1" min="1" data-product="lazy250">
                        <button type="button" class="qty-btn increment" data-product="lazy250">+</button>
                    </div>
                    <button class="add-to-cart" data-product="lazy250" data-variant="43269458690147">Add to Cart</button>
                </div>
                <div class="stock-status" id="stock-status-lazy250" style="display: none;">Out of Stock</div>
            </div>
            <p class="product-description">
                <span class="description-preview">Lazy 250 is a daylight-balanced 250 ISO color negative film that delivers stunning colors, fine grain, and exceptional latitude.</span>
                <span class="description-full">Whether you're shooting sunlit landscapes, intimate portraits, or everyday moments, this film adapts effortlessly to your vision. Renowned for its versatility, Lazy 250 performs beautifully in both outdoor and indoor lighting conditions. With an impressive dynamic range, it retains details in shadows and highlights, making it a favorite among film photographers. Need more speed? Push it up to 800 ISO with ease while maintaining rich colors and balanced contrast. Perfect for professionals and enthusiasts alike, Lazy 250 ensures every frame is timeless.</span>
                <button class="see-more-desc" data-product="lazy250">See more</button>
                <a href="#sample-gallery-250" class="see-samples">See Sample photos</a>
            </p>
        </div>

        <div class="cart-summary">
            <h3>Cart Summary</h3>
            <p>Total: â‚¹0</p>
        </div>

        <button class="place-order">Place Order</button>

        <footer>
            <a href="https://www.lazyfilms.in/labs/CONTACT">Contact</a>
            <a href="https://www.lazyfilms.in/labs/REFUND">Refund Policy</a>
            <a href="https://www.lazyfilms.in/labs/T&C">Terms & Conditions</a>
            <a href="https://www.lazyfilms.in/labs/PRIVACY_POLICY">Privacy Policy</a>
        </footer>
    </div>

    <!-- Sample Photos outside container -->
    <div id="sample-gallery" class="sample-photos">
        <h3 class="gallery-title">LAZY500</h3>
        <div class="gallery-grid">
            <img src="images/samples/sample7.jpg" alt="Sample 7" class="gallery-image">
            <img src="images/samples/sample1.jpg" alt="Sample 1" class="gallery-image">
            <img src="images/samples/sample2.jpg" alt="Sample 2" class="gallery-image">
            <img src="images/samples/sample3.jpg" alt="Sample 3" class="gallery-image">
            <img src="images/samples/sample4.jpg" alt="Sample 4" class="gallery-image">
            <img src="images/samples/sample8.jpg" alt="Sample 8" class="gallery-image">
            <img src="images/samples/sample9.jpg" alt="Sample 9" class="gallery-image">
            <img src="images/samples/sample6.jpg" alt="Sample 6" class="gallery-image">
            <img src="images/samples/sample5.jpg" alt="Sample 5" class="gallery-image">
        </div>
    </div>

    <!-- Lazy 250 Sample Photos -->
    <div id="sample-gallery-250" class="sample-photos">
        <h3 class="gallery-title">LAZY250</h3>
        <div class="gallery-grid">
            <img src="./images/samples2/sample1.jpg" alt="Sample 1" class="gallery-image">
            <img src="./images/samples2/sample2.jpg" alt="Sample 2" class="gallery-image">
            <img src="./images/samples2/sample3.jpg" alt="Sample 3" class="gallery-image">
            <img src="./images/samples2/sample4.jpg" alt="Sample 4" class="gallery-image">
            <img src="./images/samples2/sample5.jpg" alt="Sample 5" class="gallery-image">
            <img src="./images/samples2/sample6.jpg" alt="Sample 6" class="gallery-image">
        </div>
    </div>

    <!-- Modal for full-size images -->
    <div class="image-modal" onclick="closeModal()">
        <img class="modal-content" src="" alt="Full size image">
    </div>

    <!-- Universal Cart Button -->
    <div class="universal-cart-button" onclick="toggleCartDrawer()">
        ðŸ›’
        <span class="cart-count-bubble">0</span>
    </div>

    <!-- Cart Drawer -->
    <div class="cart-drawer">
        <div class="cart-drawer-header">
            <h3>Your Cart</h3>
            <button onclick="toggleCartDrawer()">âœ•</button>
        </div>
        <div class="cart-items-container">
            <!-- Cart items will be dynamically added here -->
        </div>
        <div class="cart-drawer-footer">
            <div class="cart-total">Total: â‚¹0</div>
            <button class="checkout-button" onclick="universalCheckout()">Checkout</button>
        </div>
    </div>

    <script>
        // Add smooth scrolling for both galleries
        document.querySelectorAll('.see-samples').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = e.target.getAttribute('href');
                document.querySelector(targetId).scrollIntoView({ 
                    behavior: 'smooth' 
                });
            });
        });

        // Quantity input and button handlers
        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('input', function() {
                const val = parseInt(this.value) || 1;
                this.value = val < 1 ? 1 : val;
            });
        });

        document.querySelectorAll('.qty-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const product = this.dataset.product;
                const wrapper = this.closest('.quantity-control');
                const input = wrapper.querySelector('.quantity-input[data-product="' + product + '"]');
                let current = parseInt(input.value) || 1;
                if (this.classList.contains('decrement')) {
                    current = Math.max(1, current - 1);
                } else {
                    current = current + 1;
                }
                input.value = current;
            });
        });

        // Simple cart functionality
        const VARIANT_IDS = {
            'lazy500': '43200428507235',
            'lazy250': '43269458690147'
        };

        // Shopify Storefront API configuration
        const SHOPIFY_STORE_NAME = 'rphzqx-d5.myshopify.com';
        const STOREFRONT_ACCESS_TOKEN = 'b7434c05596772a5b7b847ac6beb9aba';

        // Check product availability from Shopify
        async function checkProductAvailability() {
            const query = `
                query {
                    products(first: 10, query: "title:LAZY500 OR title:LAZY 250") {
                        edges {
                            node {
                                title
                                variants(first: 1) {
                                    edges {
                                        node {
                                            id
                                            availableForSale
                                            quantityAvailable
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            `;

            try {
                const response = await fetch(`https://${SHOPIFY_STORE_NAME}/api/2023-10/graphql.json`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Shopify-Storefront-Access-Token': STOREFRONT_ACCESS_TOKEN
                    },
                    body: JSON.stringify({ query })
                });

                const data = await response.json();
                
                data.data.products.edges.forEach(edge => {
                    const product = edge.node;
                    const variant = product.variants.edges[0]?.node;
                    
                    if (variant && !variant.availableForSale) {
                        const productId = product.title.toLowerCase().includes('500') ? 'lazy500' : 'lazy250';
                        const productActions = document.querySelector(`[data-product="${productId}"]`).closest('.product-actions');
                        const stockStatus = document.getElementById(`stock-status-${productId}`);
                        
                        productActions.classList.add('out-of-stock');
                        stockStatus.style.display = 'block';
                    }
                });
            } catch (error) {
                console.error('Error checking product availability:', error);
            }
        }

        function updateCartSummary() {
            const total = universalCart.store.total;
            document.querySelector('.cart-summary').innerHTML = `
                <h3>Cart Summary</h3>
                <p>Total: â‚¹${total}</p>
            `;
        }

        // Add to cart functionality for all products
        document.querySelectorAll('.add-to-cart').forEach(button => {
            button.addEventListener('click', function() {
                const productId = this.dataset.product;
                const variantId = this.dataset.variant;
                const quantityInput = this.previousElementSibling.querySelector('.quantity-input');
                const quantity = parseInt(quantityInput.value) || 1;
                
                // Disable button temporarily
                this.disabled = true;
                
                // Add to universal cart
                universalCart.store.items.push({
                    id: Date.now(),
                    name: productId === 'lazy500' ? 'LAZY 500' : 'LAZY 250',
                    price: 750 * quantity,
                    quantity: quantity,
                    variantId: variantId
                });
                universalCart.store.total += 750 * quantity;
                
                updateUniversalCart();
                updateCartSummary();
                
                // Show success state
                this.textContent = 'Added!';
                setTimeout(() => {
                    this.textContent = 'Add to Cart';
                    this.disabled = false;
                }, 1000);
            });
        });

        // Ensure quantity inputs only accept positive numbers
        document.querySelectorAll('.quantity-input').forEach(input => {
            input.addEventListener('change', function() {
                if (this.value < 1) this.value = 1;
            });
        });

        // Update Place order functionality
        document.querySelector('.place-order').addEventListener('click', function() {
            if (universalCart.store.items.length > 0) {
                const items = universalCart.store.items.map(item => 
                    `${item.variantId}:${item.quantity}`
                ).join(',');
                const shopifyCartUrl = `https://rphzqx-d5.myshopify.com/cart/${items}`;
                window.location.href = shopifyCartUrl;
            } else {
                alert('Please add items to cart first');
            }
        });

        // Image modal functionality
        const modal = document.querySelector('.image-modal');
        const modalImg = document.querySelector('.modal-content');
        
        // Add click listeners to all gallery images
        document.querySelectorAll('.gallery-image').forEach(img => {
            img.addEventListener('click', function() {
                modal.classList.add('active');
                modalImg.src = this.src;
            });
        });
        
        // Close modal function
        function closeModal() {
            modal.classList.remove('active');
        }
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });

        // Universal Cart Management
        let universalCart = {
            store: {
                items: [],
                total: 0
            },
            labs: {
                items: [],
                total: 0
            }
        };

        function toggleCartDrawer() {
            document.querySelector('.cart-drawer').classList.toggle('active');
        }

        function updateUniversalCart() {
            const totalItems = universalCart.store.items.length + universalCart.labs.items.length;
            const totalPrice = universalCart.store.total + universalCart.labs.total;
            
            // Update cart bubble
            document.querySelector('.cart-count-bubble').textContent = totalItems;
            
            // Update cart drawer
            const itemsContainer = document.querySelector('.cart-items-container');
            itemsContainer.innerHTML = '';
            
            // Add store items
            universalCart.store.items.forEach(item => {
                itemsContainer.appendChild(createCartItemElement(item, 'store'));
            });
            
            // Add lab items
            universalCart.labs.items.forEach(item => {
                itemsContainer.appendChild(createCartItemElement(item, 'labs'));
            });
            
            // Update total
            document.querySelector('.cart-total').textContent = `Total: â‚¹${totalPrice}`;
        }

        function createCartItemElement(item, type) {
            const div = document.createElement('div');
            div.className = 'cart-item';
            div.innerHTML = `
                <div class="cart-item-details">
                    <h4>${item.name}</h4>
                    <p>â‚¹${item.price}</p>
                </div>
                <button onclick="removeFromCart('${type}', ${item.id})">Remove</button>
            `;
            return div;
        }

        function universalCheckout() {
            // Combine items and create checkout URL
            const storeItems = universalCart.store.items.map(item => 
                `${item.variantId}:${item.quantity}`
            ).join(',');
            
            const labsItems = universalCart.labs.items.map(item =>
                `${item.variantId}:${item.quantity}`
            ).join(',');
            
            const checkoutUrl = `https://rphzqx-d5.myshopify.com/cart/${storeItems},${labsItems}`;
            window.location.href = checkoutUrl;
        }

        // Update removeFromCart function
        function removeFromCart(type, itemId) {
            if (type === 'store') {
                const index = universalCart.store.items.findIndex(item => item.id === itemId);
                if (index !== -1) {
                    universalCart.store.total -= universalCart.store.items[index].price;
                    universalCart.store.items.splice(index, 1);
                }
            } else if (type === 'labs') {
                const index = universalCart.labs.items.findIndex(item => item.id === itemId);
                if (index !== -1) {
                    universalCart.labs.total -= universalCart.labs.items[index].price;
                    universalCart.labs.items.splice(index, 1);
                }
            }
            
            updateUniversalCart();
            updateCartSummary();
        }

        // Add carousel functionality
        function startCarousel() {
            const images = document.querySelectorAll('.carousel-image');
            let currentIndex = 0;

            setInterval(() => {
                images[currentIndex].classList.remove('active');
                currentIndex = (currentIndex + 1) % images.length;
                images[currentIndex].classList.add('active');
            }, 5000); // Change image every 5 seconds
        }

        // Start carousel when page loads
        document.addEventListener('DOMContentLoaded', function() {
            startCarousel();
            checkProductAvailability(); // Check stock status on page load
        });

        // Add see more functionality for descriptions
        document.querySelectorAll('.see-more-desc').forEach(btn => {
            btn.addEventListener('click', function() {
                const productId = this.dataset.product;
                const description = this.closest('.product-description');
                const fullText = description.querySelector('.description-full');
                const previewText = description.querySelector('.description-preview');
                
                if (fullText.classList.contains('show')) {
                    fullText.classList.remove('show');
                    this.textContent = 'See more';
                } else {
                    fullText.classList.add('show');
                    this.textContent = 'See less';
                }
            });
        });
    </script>
</body>
</html>
